{% include '/reports/tab_bar.html' %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
<style>
    :root {
        --color-blue-light: rgba(33, 150, 243, 0.1);
        --color-green-light: rgba(76, 175, 80, 0.1);
        --color-purple-light: rgba(156, 39, 176, 0.1);
        --color-orange-light: rgba(255, 152, 0, 0.1);
        --color-pink-light: rgba(233, 30, 99, 0.1);
        --color-teal-light: rgba(0, 150, 136, 0.1);
        --color-yellow-light: rgba(255, 235, 59, 0.1);
        --color-indigo-light: rgba(63, 81, 181, 0.1);
    }

    body {
        font-family: Arial, sans-serif;
        background: #f5f5f5;
        color: #333;
    }

    .dashboard-container {
        max-width: 1400px;
        margin: 0 auto;
    }

    .section {
        background: white;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 12px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .section-title {
        margin-bottom: 20px;
        color: #333;
        padding-bottom: 10px;
        border-bottom: 2px solid #eee;
    }



    .social-card {
        background: var(--color-purple-light);
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 15px;
    }

    .review-card {
        background: var(--color-green-light);
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 15px;
    }

    .funnel-stage {
        margin: 0 auto;
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        margin-bottom: 10px;
    }

    .stats-container {
        background: var(--color-teal-light);
        padding: 20px;
        border-radius: 12px;
        margin-top: 20px;
    }

    .social-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }

    .social-card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .social-header {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
    }

    .social-logo {
        width: 30px;
        height: 30px;
        margin-right: 10px;
    }

    .social-title {
        font-size: 1.2em;
        font-weight: bold;
        color: #333;
    }

    .social-stats {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
    }

    .stat-item {
        padding: 8px;
        background: #f8f9fa;
        border-radius: 4px;
        text-align: center;
    }

    .stat-value {
        font-size: 1.2em;
        font-weight: bold;
        color: #2c3e50;
    }

    .stat-label {
        font-size: 0.9em;
        color: #666;
        margin-top: 4px;
    }

    .google-reviews {
        padding: 20px;
        background-color: #f4f4f4;
        border-radius: 8px;
    }

    .google-reviews h3 {
        font-size: 2rem;
        margin-bottom: 20px;
        text-align: center;
        font-weight: bold;
    }

    /* Google logo styling */
    /* Google Logo and Name Section */
    .google-logo {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
    }

    .google-name {
        font-size: 1.5rem;
        font-weight: bold;
        margin-bottom: 10px;
    }

    .google-letter {
        font-size: 2.5rem;
        font-weight: bold;
    }

    /* Google Colors */
    .google-blue {
        color: #4285F4;
    }

    .google-red {
        color: #DB4437;
    }

    .google-yellow {
        color: #F4B400;
    }

    .google-green {
        color: #0F9D58;
    }

    /* Verified Reviews Section */
    h3 {
        font-size: 1.5rem;
        margin-bottom: 10px;
        font-weight: normal;
        color: #333;
    }

    /* Star Rating */
    .star-rating i {
        color: #FFD700;
        /* Gold color for stars */
        font-size: 1.5rem;
    }

    /* Ratings summary section */
    .ratings-summary {
        display: flex;
        justify-content: space-between;
        gap: 20px;
        margin-bottom: 20px;
    }

    .rating p {
        font-size: 1.5rem;
        font-weight: bold;
    }

    .reviews-count p {
        font-size: 1.2rem;
    }

    .reviews-boxes {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
    }

    .review {
        background: #f9f9f9;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .reviewer {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: 10px;
    }

    .reviewer img {
        height: 40px;
        width: 40px;
        border-radius: 50%;
    }

    .paid-analytics .filters {
        margin-bottom: 20px;
    }

    /* Layout for Analytics Section */
    .analytics-metrics {
        margin-bottom: 20px;
    }

    /* Flex layout for Metric Cards - 2 Rows, 4 Columns */
    .metrics-row {
        display: grid;
        grid-template-columns: repeat(3, 1fr) 1fr;
        /* 3 columns for metrics, 1 column for channels */
        gap: 20px;
        margin-bottom: 20px;
    }

    /* Metric Cards Styling */
    .metric-card {
        background-color: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    /* Channels Box Styling */
    .channels-box {
        padding: 20px;
        background-color: #f8f8f8;
        border-radius: 10px;
        text-align: center;
        grid-column: span 1;
        /* Only spans 1 column */
    }

    .channels-box h3 {
        font-size: 1.5rem;
        margin-bottom: 20px;
        font-weight: bold;
    }

    .channel-card {
        display: flex;
        align-items: center;
        padding: 10px;
        margin: 10px;
        color: #fff;
        font-size: 1.2rem;
        font-weight: bold;
        border-radius: 5px;
        text-align: left;
    }

    .channel-card .channel-color {
        width: 15px;
        height: 15px;
        border-radius: 50%;
        margin-right: 10px;
    }

    /* Charts Grid Styling */
    .charts-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        /* 3 columns in a single row */
        gap: 20px;
        margin-top: 20px;
        justify-items: center;
        /* Centers each chart horizontally */
        align-items: center;
        /* Centers each chart vertically */
    }

    .chart-container {
        background-color: #fff;
        padding: 10px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        width: 250px;
        /* Width of the chart */
        height: 250px;
        /* Height of the chart */
    }


    /* Channels Box Styling */
    .channels-box {
        padding: 20px;
        background-color: #f8f8f8;
        border-radius: 10px;
        text-align: center;
    }

    .channel-card {
        display: flex;
        align-items: center;
        padding: 10px;
        margin: 5px 0;
        /* Adjusted spacing */
        color: #333;
        font-size: 1rem;
        font-weight: bold;
        text-align: left;
    }

    .channel-card .channel-color {
        width: 15px;
        height: 15px;
        border-radius: 50%;
        margin-right: 10px;
    }



    .social-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }

    .social-card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .social-header {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
    }

    .social-logo {
        width: 30px;
        height: 30px;
        margin-right: 10px;
    }

    .social-title {
        font-size: 1.2em;
        font-weight: bold;
        color: #333;
    }

    .social-stats {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
    }

    .stat-item {
        padding: 8px;
        background: #f8f9fa;
        border-radius: 4px;
        text-align: center;
    }

    .stat-value {
        font-size: 1.2em;
        font-weight: bold;
        color: #2c3e50;
    }

    .stat-label {
        font-size: 0.9em;
        color: #666;
        margin-top: 4px;
    }

    /* General styling for the social cards */
    .social-card {
        border: 1px solid #ccc;
        margin: 10px;
        padding: 15px;
        border-radius: 8px;
        background-color: #fff;
    }

    .social-header {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
    }

    .social-title {
        font-size: 1.2rem;
        margin-left: 10px;
        font-weight: bold;
    }

    /* Social icons styling */
    .channel-icon {
        font-size: 30px;
    }

    .facebook-icon {
        color: #3b5998;
    }

    .youtube-icon {
        color: #ff0000;
    }

    .instagram-icon {
        color: #e4405f;
    }

    .email-icon {
        color: #0072c6;
    }

    .sms-icon {
        color: #25d366;
    }

    .whatsapp-icon {
        color: #25d366;
    }

    /* Styling for the stats */
    .social-stats {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
    }

    .stat-item {
        text-align: center;
    }

    .stat-value {
        font-size: 1.5rem;
        font-weight: bold;
    }

    .stat-label {
        font-size: 1rem;
        color: #555;
    }



    /* Main Section Styling */
    .section {
        padding: 20px;
    }

    /* Grid layout for key metrics cards with two rows */
    .metrics-grid {
        display: flex;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }

    /* Metric Cards */
    .metric-card {
        padding: 15px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .metric-icon {
        font-size: 2rem;
        margin-bottom: 10px;
    }

    .metric-value {
        font-size: 1.5rem;
        font-weight: bold;
    }

    .metric-label {
        font-size: 1rem;
        margin-top: 5px;
    }

    /* Spend & New Subscribers Grid */
    .spend-subscribers-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }

    /* Spend Cards */
    .spend-card {
        background-color: #f8f8f8;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
    }

    .spend-icon {
        font-size: 2rem;
        margin-bottom: 10px;
    }

    .spend-value {
        font-size: 1.5rem;
        font-weight: bold;
    }

    .spend-label {
        font-size: 1rem;
        margin-top: 5px;
    }

    /* Charts Grid for Doughnut Chart and Other Chart */
   

    /* Resize charts */
    .chart-container {
        height: 250px;
        /* Make charts smaller */
    }

    /* Active Channels Section */
    .active-channels {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
        margin-top: 20px;
    }

    /* Active Channel Icons */
    .channel-icon-container {
        font-size: 2.5rem;
        color: #4c4c4c;
        display: inline-block;
    }

    .channel-icon-container i {
        color: #4c4c4c;
    }

    /* Media Query for Smaller Screens */
    @media (max-width: 768px) {

        .metrics-grid,
        .spend-subscribers-grid,
        .charts-grid {
            grid-template-columns: 1fr;
        }

        .channel-icon-container {
            font-size: 2rem;
        }

        /* Smaller charts on mobile */
        .chart-container {
            height: 200px;
        }
    }

    .chart-container-spread {
        background: white;
        padding: 10px;
        border-radius: 8px;
        height: 350px;
        width: 350px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        position: relative;
    }

    .chart-container-bar {
        background: white;
        padding: 10px;
        border-radius: 8px;
        height: 210px;
        /* Reduced height */
        width: 400px;
        /* Reduced width */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .chart-container-channel {
        background: white;
        padding: 10px;
        border-radius: 8px;
        height: 210px;
        width: 250px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        position: relative;
    }

    .channels-list {
        font-size: 15px;
        font-weight: 600;
        display: flex;
        justify-content: space-between;
    }

    .chart-container-social {
        background: white;
        padding: 10px;
        border-radius: 8px;
        height: 210px;
        width: 250px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .social-btn {
        display: flex;
        justify-content: space-around;
    }

    /* Calendar Section */
.calendar-section {
    flex: 3;
    display: flex;
    flex-direction: column;
}

.calendar-section h2 {
    font-size: 1.5rem;
    margin-bottom: 10px;
}

.calendar-grid {
    display: flex;
    gap: 20px;
}

.calendar-card {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    flex: 1;
}

.calendar-card h3 {
    font-size: 1rem;
    color: #333;
    margin-bottom: 10px;
}

.event {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 5px;
    color: #fff;
}

.event.success {
    background-color: #c8f7c5;
    color: #2e7d32;
}

.event.failed {
    background-color: #f7c5c5;
    color: #d32f2f;
}

.event.waiting {
    background-color: #ffe9b3;
    color: #e65100;
}

.event p {
    margin: 0;
    font-size: 0.9rem;
}

.event i {
    font-size: 1.2rem;
    margin-left: 10px;
}

/* Metrics Section */
.metrics-grid1 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    flex: 2;
}

.metric-card1 {
    background: white;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.metric-card1 h2 {
    font-size: 1.2rem;
    color: #333;
    margin-bottom: 10px;
}

.metric-card1 p {
    margin: 5px 0;
    font-size: 1rem;
    color: #555;
}
</style>
<div class="dashboard-container">
    <!-- Key Metrics Section -->
    {% if user_organization.id %}
    <section class="section">
        <h2 class="section-title">Key Metrics</h2>

        <!-- Grid Layout for Key Metrics -->
        <div class="d-flex mb-3">
            <div class="mr-3">
                <div class="metrics-grid mr-2">
                    <!-- First Row of Metrics -->
                    <div class="metric-card reach d-flex" style="background-color: var(--color-blue-light);">
                        <div class="mr-4">
                            <div class="metric-icon">📈</div>
                            <div class="metric-value">{{ reports.data.reach }}</div>
                            <div class="metric-label">Reach</div>
                        </div>
                        <div class="pl-5 ml-3">
                            <div class="metric-icon">🎯</div>
                            <div class="metric-value">{{ reports.data.engagement }}</div>
                            <div class="metric-label">Engagement</div>
                        </div>
                    </div>

                    <div class="metric-card d-flex" style="background-color: var(--color-orange-light);">
                        <div class="mr-2">
                            <div class="spend-icon">💰</div>
                            <div class="spend-value">{{ reports.data.whatsAppSpend }}</div>
                            <div class="spend-label">WhatsApp Spend</div>
                        </div>
                        <div class="pl-5">
                            <div class="spend-icon">💰</div>
                            <div class="spend-value">{{ reports.data.facebookSpend }}</div>
                            <div class="spend-label">Facebook Spend</div>
                        </div>
                    </div>
                </div>
                <div class="d-flex">
                    <!-- Second Row of Metrics -->
                    <div class="metric-card mr-2" style="background-color: var(--color-purple-light);">
                        <div class="metric-icon">👥</div>
                        <div class="metric-value">{{ reports.data.totalSubscribers }}</div>
                        <div class="metric-label">Total Subscribers</div>
                    </div>
                    <div class="metric-card mr-2" style="background-color: var(--color-orange-light);">
                        <div class="metric-icon">📊</div>
                        <div class="metric-value">{{ reports.data.subscriptionGrowthRate }}</div>
                        <div class="metric-label">Subscription Growth Rate</div>
                    </div>
                    <div class="metric-card">
                        <div class="spend-icon">📥</div>
                        <div class="spend-value">{{ reports.data.newSubscribers }}</div>
                        <div class="spend-label">New Subscribers</div>
                    </div>
                </div>
            </div>
            <div class="chart-container-spread">
                <canvas id="campaignSpreadChart"></canvas>
            </div>
        </div>

        <div class="d-flex">
            <div class="chart-container-channel mr-2">
                <canvas id="campaignSpreadChart2"></canvas>
            </div>

            <div class="chart-container-bar mr-2">
                <canvas id="funnelChart"></canvas>
            </div>

            <div class="chart-container-social">
                <div class="channels-list">
                    <p>Active Channels</p>
                    <p><span>view ></span></p>
                </div>
                <div>
                    <div class="social-btn">
                        {% if reports.data.socialEngagements.facebook.isConnected %}
                        <div class="channel-icon-container">
                            <i class="facebook-icon fab fa-facebook-f"></i>
                        </div>
                        {% endif %}
                        {% if reports.data.socialEngagements.youtube.isConnected %}
                        <div class="channel-icon-container">
                            <i class="youtube-icon fab fa-youtube"></i>
                        </div>
                        {% endif %}
                        {% if reports.data.socialEngagements.instagram.isConnected %}
                        <div class="channel-icon-container">
                            <i class="instagram-icon fab fa-instagram"></i>
                        </div>
                        {% endif %}
                    </div>
                    <div class="social-btn">
                        {% if reports.data.socialEngagements.email.isConnected %}
                        <div class="channel-icon-container">
                            <i class="email-icon fas fa-envelope"></i>
                        </div>
                        {% endif %}
                        {% if reports.data.socialEngagements.sms.isConnected %}
                        <div class="channel-icon-container">
                            <i class="sms-icon fas fa-comment-dots"></i>
                        </div>
                        {% endif %}
                        {% if reports.data.socialEngagements.whatsApp.isConnected %}
                        <div class="channel-icon-container">
                            <i class="whatsapp-icon fab fa-whatsapp"></i>
                        </div>
                        {% endif %}

                    </div>
                </div>
            </div>
        </div>
    </section>



    <!-- Social Media Engagement Details -->
    <section class="section">
        <h2 class="section-title">Engagement</h2>
        <div class="social-grid">
            <!-- Facebook Card -->
            <!-- Facebook Card -->
            <div class="social-card">
                <div class="social-header">
                    <i class="fab fa-facebook-f channel-icon facebook-icon"></i>
                    <span class="social-title">Facebook</span>
                </div>
                <div class="social-stats">
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.facebook.views }}</div>
                        <div class="stat-label">Views</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.facebook.likes }}</div>
                        <div class="stat-label">Likes</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.facebook.comments }}</div>
                        <div class="stat-label">Comments</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.facebook.wow }}</div>
                        <div class="stat-label">Wow</div>
                    </div>
                </div>
            </div>

            <!-- YouTube Card -->
            <div class="social-card">
                <div class="social-header">
                    <i class="fab fa-youtube channel-icon youtube-icon"></i>
                    <span class="social-title">YouTube</span>
                </div>
                <div class="social-stats">
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.youtube.views }}</div>
                        <div class="stat-label">Views</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.youtube.likes }}</div>
                        <div class="stat-label">Likes</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.youtube.comments }}</div>
                        <div class="stat-label">Comments</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.youtube.dislikes }}</div>
                        <div class="stat-label">Dislikes</div>
                    </div>
                </div>
            </div>

            <!-- Instagram Card -->
            <div class="social-card">
                <div class="social-header">
                    <i class="fab fa-instagram channel-icon instagram-icon"></i>
                    <span class="social-title">Instagram</span>
                </div>
                <div class="social-stats">
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.instagram.views }}</div>
                        <div class="stat-label">Views</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.instagram.likes }}</div>
                        <div class="stat-label">Likes</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.instagram.comments }}</div>
                        <div class="stat-label">Comments</div>
                    </div>
                </div>
            </div>

            <!-- Email Card -->
            <div class="social-card">
                <div class="social-header">
                    <i class="fas fa-envelope channel-icon email-icon"></i>
                    <span class="social-title">Email</span>
                </div>
                <div class="social-stats">
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.email.noOfEmails }}</div>
                        <div class="stat-label">Emails Sent</div>
                    </div>
                </div>
            </div>

            <!-- SMS Card -->
            <div class="social-card">
                <div class="social-header">
                    <i class="fas fa-comment-dots channel-icon sms-icon"></i>
                    <span class="social-title">SMS</span>
                </div>
                <div class="social-stats">
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.sms.noOfSms }}</div>
                        <div class="stat-label">Messages Sent</div>
                    </div>
                </div>
            </div>

            <!-- WhatsApp Card -->
            <div class="social-card">
                <div class="social-header">
                    <i class="fab fa-whatsapp channel-icon whatsapp-icon"></i>
                    <span class="social-title">WhatsApp</span>
                </div>
                <div class="social-stats">
                    <div class="stat-item">
                        <div class="stat-value">{{ reports.data.socialEngagements.whatsApp.noOfWhatsApp }}</div>
                        <div class="stat-label">Messages Sent</div>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <section>
        <div class="section-header">
            <h2>Direct Messaging Effectiveness</h2>
            <p>Select the tabs below to check the performance of each channel.</p>
            <div id="chartContainer" style="height: 300px; width: 100%;"></div>

        </div>

        <!-- <div id="chartContainer" style="height: 300px; width: 100%;"></div> -->

    </section>

    <section>
        <div class="container">
            <h1>Posts Online</h1>
            <div class="content">
                <!-- Metrics Section -->
                <div class="metrics-grid1">
                    <div class="metric-card1">
                        <h2>Instagram</h2>
                        <p><strong>{{ reports.data.reachSocialIndexByChannel.instaComment }}</strong></p>
                    </div>
                    <div class="metric-card1">
                        <h2>Facebook</h2>
                        <p><strong>{{ reports.data.reachSocialIndexByChannel.fbComments }}</strong></p>
                        <!-- <p><strong>87</strong> Reels</p> -->
                    </div>
                    <div class="metric-card1">
                        <h2>Youtube</h2>
                        <p><strong>{{ reports.data.reachSocialIndexByChannel.youtubeComments }}</strong></p>
                        <!-- <p><strong>22</strong> Shorts</p> -->
                    </div>
                    <div class="metric-card1">
                        <h2>Linkedin</h2>
                        <p><strong>{{ reports.data.reachSocialIndexByChannel.linkedinComments }}</strong></p>
                    </div>
                    <div class="metric-card1">
                        <h2>WhatsApp</h2>
                        <p><strong>{{ reports.data.reachSocialIndexByChannel.whatsAppReplied }}</strong></p>
                    </div>
                    <div class="metric-card1">
                        <h2>SMS</h2>
                        <p><strong>{{ reports.data.reachSocialIndexByChannel.instaComment }}</strong></p>
                    </div>
                    <div class="metric-card1">
                        <h2>X</h2>
                        <p><strong>{{ reports.data.reachSocialIndexByChannel.xTweets }}</strong></p>
                    </div>
                </div>
    
                <!-- Calendar Section -->
                <div class="calendar-section">
                    <h2>Calendar</h2>
                    <div class="calendar-grid">
                        <div class="calendar-card">
                            <h3>17th Dec 24 - Tuesday</h3>
                            <div class="event success">
                                <p><span>7:24 PM</span> Success <i class="fab fa-instagram"></i></p>
                            </div>
                            <div class="event success">
                                <p><span>8:24 PM</span> Success <i class="fab fa-facebook"></i></p>
                            </div>
                            <div class="event failed">
                                <p><span>7:24 PM</span> Failed <i class="fab fa-linkedin"></i></p>
                            </div>
                        </div>
                        <div class="calendar-card">
                            <h3>18th Dec 24 - Wednesday</h3>
                            <div class="event waiting">
                                <p><span>5:24 PM</span> Waiting <i class="fab fa-instagram"></i></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    

    <section class="google-reviews">
        <h5>Google Reviews</h5>
        <div class="reviews-header">
            <div class="google-logo">
                <!-- Google Name with Letters in Different Colors -->
                <span class="google-name">
                    <span class="google-letter google-blue">G</span>
                    <span class="google-letter google-red">o</span>
                    <span class="google-letter google-yellow">o</span>
                    <span class="google-letter google-blue">g</span>
                    <span class="google-letter google-green">l</span>
                    <span class="google-letter google-red">e</span>
                </span> <!-- Name Text -->

                <!-- Verified Reviews Text -->
                <h3>Verified Reviews</h3>

                <!-- Star Rating for Verified Reviews -->
                <div class="star-rating">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                </div>
            </div>

            <div class="ratings-summary">
                <div class="rating">
                    <h4>Overall Rating</h4>
                    <p>{{ reports.data.reviews.overAll }}<i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i><i class="fas fa-star"></i></p>
                </div>
                <div class="reviews-count">
                    <h4>Total Reviews</h4>
                    <p>{{ reports.data.reviews.overAll }}</p>
                </div>
            </div>
        </div>
        <div class="reviews-boxes">
            <div class="review">
                <p>Non risus viverra enim, quis. Eget vitae arcu vivamus sit tellus, viverra turpis lorem. Varius a
                    turpis urna id porttitor.</p>
                <div class="reviewer">
                    <img src="https://via.placeholder.com/50" alt="Reviewer">
                    <p>Hellen Jummy</p>
                </div>
            </div>
            <div class="review">
                <p>Non risus viverra enim, quis. Eget vitae arcu vivamus sit tellus, viverra turpis lorem. Varius a
                    turpis urna id porttitor.</p>
                <div class="reviewer">
                    <img src="https://via.placeholder.com/50" alt="Reviewer">
                    <p>Hellen Jummy</p>
                </div>
            </div>
            <div class="review">
                <p>Non risus viverra enim, quis. Eget vitae arcu vivamus sit tellus, viverra turpis lorem. Varius a
                    turpis urna id porttitor.</p>
                <div class="reviewer">
                    <img src="https://via.placeholder.com/50" alt="Reviewer">
                    <p>Hellen Jummy</p>
                </div>
            </div>
        </div>
    </section>

    <section class="paid-analytics">
        <h2>Paid Analytics</h2>
        <div class="filters">
            <label for="time-period">Last 4 weeks</label>
        </div>

        <!-- Analytics Metrics -->
         <div>
         <div>
        <div class="metrics-row">
            <div class="metric-card">Spend <p>111,332 <i class="fas fa-arrow-up"></i></p>
            </div>
            <div class="metric-card">Reach <p>111,332 <i class="fas fa-arrow-up"></i></p>
            </div>
            <div class="metric-card">Clicks <p>111,332 <i class="fas fa-arrow-up"></i></p>
            </div>
        </div>
        <div class="metrics-row">
            <div class="metric-card">Engagement <p>111,332 <i class="fas fa-arrow-up"></i></p>
            </div>
            <div class="metric-card">Avg. CPM (PKR) <p>111,332 <i class="fas fa-arrow-up"></i></p>
            </div>
            <div class="metric-card">Impressions <p>111,332 <i class="fas fa-arrow-up"></i></p>
            </div>
        </div>
        </div>
        <div class="channels-box">
            <h3>Channels</h3>
            <!-- Dynamic channel cards will be inserted here -->
        </div>
        </div>

        <!-- Charts Grid -->
        <div class="charts-grid">
            <div class="chart-container">
                <canvas id="shareOfSpendChart"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="shareOfImpressionsChart"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="shareOfReachChart"></canvas>
            </div>
        </div>
    </section>




    {% endif %}
</div>


<script>
    // Campaign Spread Chart
    new Chart(document.getElementById('campaignSpreadChart'), {
        type: 'doughnut',
        data: {
            labels: ['Social', 'Referral', 'Paid'],
            datasets: [{
                data: [70, 13, 17],
                backgroundColor: ['rgba(33, 150, 243, 0.8)', 'rgba(76, 175, 80, 0.8)', 'rgba(255, 152, 0, 0.8)']
            }]
        },
        options: {
            responsive: true,
            plugins: {
                title: {
                    display: true,
                    text: 'Campaign Distribution'
                }
            }
        }
    });

    // Campaign Spread Chart
    new Chart(document.getElementById('campaignSpreadChart2'), {
        type: 'doughnut',
        data: {
            labels: ['channel 1', 'channel 2', 'channel 3', "channel 4", "channel 5"],
            datasets: [{
                data: [28, 22, 9, 16, 25],
                backgroundColor: [
                    'rgba(33, 150, 243, 0.8)',
                    'rgba(76, 175, 80, 0.8)',
                    'rgba(255, 152, 0, 0.8)',
                    'rgba(128, 0, 0, 0.8)',
                    'rgba(255, 152, 0, 0.8)'

                ]
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: true,
                    position: 'right', // Positions the legend on the left
                    labels: {
                        usePointStyle: true, // Use a dot instead of a rectangle
                        pointStyle: 'circle', // Make the legend icons circular
                        color: '#333', // Optional: Change legend text color
                        font: {
                            size: 14 // Optional: Adjust font size
                        }
                    }
                },
                title: {
                    display: true,
                    text: 'Channel Contribution to Total Subscribers'
                }
            }
        }
    });
    // Channel Contribution Chart
    new Chart(document.getElementById('channelContributionChart'), {
        type: 'bar',
        data: {
            labels: ['Channel 1', 'Channel 2', 'Channel 3', 'Channel 4', 'Channel 5'],
            datasets: [{
                label: 'Contribution (%)',
                data: [25, 9, 16, 20, 30],
                backgroundColor: 'rgba(76, 175, 80, 0.8)'
            }]
        },
        options: {
            responsive: true,
            plugins: {
                title: {
                    display: true,
                    text: 'Channel Contribution'
                }
            }
        }
    });

    document.addEventListener("DOMContentLoaded", () => {
        // Data for channels
        const channelLabels = ['Facebook', 'Instagram', 'LinkedIn', 'Google Reviews', 'WhatsApp', 'YouTube', 'X'];
        const channelData = [22, 25, 14, 10, 16, 8, 5];
        const channelColors = [
            'rgba(33, 150, 243, 0.8)',
            'rgba(233, 30, 99, 0.8)',
            'rgba(76, 175, 80, 0.8)',
            'rgba(255, 152, 0, 0.8)',
            'rgba(0, 150, 136, 0.8)',
            'rgba(63, 81, 181, 0.8)',
            'rgba(255, 235, 59, 0.8)'
        ];

        // Add channel names and colors to the Channels Box
        const channelsBox = document.querySelector('.channels-box');

        channelLabels.forEach((label, index) => {
            const channelCard = document.createElement('div');
            channelCard.classList.add('channel-card');

            const channelColor = document.createElement('div');
            channelColor.classList.add('channel-color');
            channelColor.style.backgroundColor = channelColors[index]; // Set the color dynamically

            const channelText = document.createElement('span');
            channelText.textContent = `${label}`; // Add name and percentage

            channelCard.appendChild(channelColor);
            channelCard.appendChild(channelText);
            channelsBox.appendChild(channelCard);
        });

        // Chart configurations
        const chartConfigs = [
            {
                elementId: 'shareOfSpendChart',
                title: 'Share of Spend'
            },
            {
                elementId: 'shareOfImpressionsChart',
                title: 'Share of Impressions'
            },
            {
                elementId: 'shareOfReachChart',
                title: 'Share of Reach'
            }
        ];

        chartConfigs.forEach(config => {
            const ctx = document.getElementById(config.elementId).getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: channelData,
                        backgroundColor: channelColors
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: config.title
                        },
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    size: 10
                                }
                            }
                        }
                    }
                }
            });
        });
    });

    window.onload = function () {

        var chart = new CanvasJS.Chart("chartContainer", {
            data: [{
                type: "funnel",
                indexLabel: "{label} - {y}",
                toolTipContent: "<b>{label}</b>: {y} <b>({percentage}%)</b>",
                neckWidth: 20,
                neckHeight: 0,
                valueRepresents: "area",
                dataPoints: [
                    { y: 2345, label: "Send" },
                    { y: 2496, label: "delivered" },
                    { y: 1398, label: "Read" },
                    { y: 1118, label: "Reply" },
                ]
            }]
        });
        calculatePercentage();
        chart.render();

        function calculatePercentage() {
            var dataPoint = chart.options.data[0].dataPoints;
            var total = dataPoint[0].y;
            for (var i = 0; i < dataPoint.length; i++) {
                if (i == 0) {
                    chart.options.data[0].dataPoints[i].percentage = 100;
                } else {
                    chart.options.data[0].dataPoints[i].percentage = ((dataPoint[i].y / total) * 100).toFixed(2);
                }
            }
        }

    }


    const funnelCtx = document.getElementById('funnelChart').getContext('2d');
    new Chart(funnelCtx, {
        type: 'bar',
        data: {
            labels: ['Channel 1', 'Channel 2', 'Channel 3', 'Channel 4', 'Channel 5'],
            datasets: [{
                label: 'Messages',
                data: [2245, 1274, 6133, 4325, 2525],
                backgroundColor: ['#ff6f61', '#ffcc00', '#87ceeb', '#8a2be2', '#4caf50'],
            }]
        },
        options: {
            indexAxis: 'y',
            aspectRatio: 2.5,
            plugins: {
                legend: {
                    display: false
                }
            },
            scales: {
                x: {
                    beginAtZero: true
                }
            }
        }
    });



</script>
<script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

<script>
    const REPORTS_AJAX_SOURCE = '{{ url("reports_ajax") | raw }}';
</script>